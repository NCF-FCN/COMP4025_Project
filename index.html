<!DOCTYPE html>
<html>

<treeGroup>
    <meta charset=utf-8>
    <title>Gun Shooting Simulation</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</treeGroup>

<body>
    <script src="js/three.js"></script>
    <script src="js/loaders/GLTFLoader.js"></script>
    <script src="js/controls/TrackballControls.js"></script>
    <script>
        // Scene
        var scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87cefa);

        // Camera
        var aspect = window.innerWidth / window.innerHeight;
        var camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 10000);

        // Renderer
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.gammaOutput = true;
        document.body.appendChild(renderer.domElement);

        // control
        const controls = new THREE.TrackballControls(camera);

        //lakeObjectGroup
        var lakeObjectGroup = new THREE.Group();
        scene.add(lakeObjectGroup);

        // GLTF object
        var forest;
        new THREE.GLTFLoader().load('models/forest/scene.glb', function (gltf) {
            forest = gltf.scene;
            scene.add(forest);

            forest.scale.set(150, 150, 150);
        }, undefined, function (error) {
            console.error(error);
        });

        var lake;
        new THREE.GLTFLoader().load('models/lake/scene.glb', function (gltf) {
            lake = gltf.scene;
            scene.add(lake);

            lake.scale.set(160, 1, 170);

            lake.position.x = 400;
            lake.position.y = 25;
            lake.position.z = 550;
        }, undefined, function (error) {
            console.error(error);
        });

        var tree;
        new THREE.GLTFLoader().load('models/tree/scene.glb', function (gltf) {
            tree = gltf.scene;

            //tree - 1
            lakeObjectGroup.add(tree);

            tree.scale.set(0.5, 0.5, 0.5);

            tree.position.x = 380;
            tree.position.y = 60;
            tree.position.z = 550;

            tree.rotation.x = -0.2;
            tree.rotation.y = -2.7;
        }, undefined, function (error) {
            console.error(error);
        });

        var tree2;
        new THREE.GLTFLoader().load('models/tree2/scene.glb', function (gltf) {
            tree2 = gltf.scene;
            scene.add(tree2);

            tree2.scale.set(0.9, 0.9, 0.9);

            tree2.position.x = -150;
            tree2.position.y = -2;
        }, undefined, function (error) {
            console.error(error);
        });

        var tree3;
        new THREE.GLTFLoader().load('models/tree3/scene.glb', function (gltf) {
            tree3 = gltf.scene;
            
            // tree3 - 1
            lakeObjectGroup.add(tree3);

            tree3.scale.set(10, 10, 10);

            tree3.position.x = 400;
            tree3.position.y = -3;
            tree3.position.z = 490;

            tree3.rotation.z = -0.02;
            tree3.rotation.y = -0.5;
        }, undefined, function (error) {
            console.error(error);
        });

        var tree4;
        new THREE.GLTFLoader().load('models/tree4/scene.glb', function (gltf) {
            tree4 = gltf.scene;
            scene.add(tree4);

            tree4.scale.set(100, 100, 100);

            tree4.position.x = 150;
            tree4.position.y = 5;
        }, undefined, function (error) {
            console.error(error);
        });

        var rock;
        new THREE.GLTFLoader().load('models/rock/scene.gltf', function (gltf) {
            rock = gltf.scene;

            //rock - 1
            lakeObjectGroup.add(rock);

            rock.scale.set(100, 100, 100);

            rock.position.x = 390;
            rock.position.y = 1000;
            rock.position.z = 540;

            rock.rotation.y = -0.5;
        }, undefined, function (error) {
            console.error(error);
        });

        var rock2;
        new THREE.GLTFLoader().load('models/rock2/scene.gltf', function (gltf) {
            rock2 = gltf.scene;
            scene.add(rock2);

            rock2.scale.set(100, 100, 100);
            
            rock2.position.z = -150;
        }, undefined, function (error) {
            console.error(error);
        });

        var rock3;
        new THREE.GLTFLoader().load('models/rock3/scene.gltf', function (gltf) {
            rock3 = gltf.scene;
            scene.add(rock3);

            rock3.scale.set(100, 100, 100);

            rock3.position.x = -700;
            rock3.position.z = 600;

            rock3.rotation.y = 3;
        }, undefined, function (error) {
            console.error(error);
        });       

        // Camera position
        // camera.position.x = 900;
        // camera.position.y = 600;
        // camera.position.z = 900;
        camera.position.y = 200;
        camera.position.z = 900;

        // DirectionalLight
        var DirectionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
        DirectionalLight.position.set(-100, 100, -100);
        scene.add(DirectionalLight);

        // Mouse move function and listener
        // var mouse = new THREE.Vector2();
        // function onMouseMove(event) {
        //     event.preventDefault();
        //     mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        // };
        // document.addEventListener('mousemove', onMouseMove, false);

        // render function
        var render = function () {
            requestAnimationFrame(render);

            controls.update();
            renderer.render(scene, camera);

            // var current = tree;
            // current.rotation.y += mouse.y / 150;
        };

        render();
    </script>
</body>

</html>