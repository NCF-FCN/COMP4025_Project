<!DOCTYPE html>
<html>

<treeGroup>
    <meta charset=utf-8>
    <title>Gun Shooting Simulation</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</treeGroup>

<body>
    <script src="js/three.js"></script>
    <script src="js/loaders/GLTFLoader.js"></script>
    <script src="js/controls/TrackballControls.js"></script>
    <script>
        // Scene
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x87cefa);

        // Camera
        const aspect = window.innerWidth / window.innerHeight;
        const camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 10000);

        // Renderer
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.gammaOutput = true;
        document.body.appendChild(renderer.domElement);

        // control
        const controls = new THREE.TrackballControls(camera);

        //lakeGroup
        const lakeGroup = new THREE.Group();
        scene.add(lakeGroup);

        //treeGroup
        const treeGroup = new THREE.Group();
        scene.add(treeGroup);

        // GLTF object
        new THREE.GLTFLoader().load('models/forest/scene.glb', function (gltf) {
            // forest - 1 > scene
            const forest = gltf.scene;
            scene.add(forest);

            forest.scale.set(150, 150, 150);
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/lake/scene.glb', function (gltf) {
            //lake - 1 > lakeGroup
            const lake = gltf.scene;            
            lakeGroup.add(lake);

            lake.scale.set(160, 1, 170);

            lake.position.x = 400;
            lake.position.y = 25;
            lake.position.z = 550;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/tree/tree1/scene.glb', function (gltf) {
            //tree1 - 1 > lakeGroup
            const tree = gltf.scene;
            lakeGroup.add(tree);

            tree.scale.set(0.5, 0.5, 0.5);

            tree.position.x = 380;
            tree.position.y = 60;
            tree.position.z = 550;

            tree.rotation.x = -0.2;
            tree.rotation.y = -2.7;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/tree/tree2/scene.glb', function (gltf) {
            //tree2 - 1 > treeGroup
            const tree2 = gltf.scene;
            treeGroup.add(tree2);

            tree2.scale.set(0.9, 0.9, 0.9);

            tree2.position.x = -150;
            tree2.position.y = -2;

            //tree2 - 2 > treeGroup
            let tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = 150;
            tree2Clone.position.y = 25;
            tree2Clone.position.z = 120;

            //tree2 - 3 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = -450;
            tree2Clone.position.z = -300;

            //tree2 - 4 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = -550;
            tree2Clone.position.z = -800;

            //tree2 - 5 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = 200;
            tree2Clone.position.z = -340;

            //tree2 - 6 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = 270;
            tree2Clone.position.z = -840;

            //tree2 - 7 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = 900;
            tree2Clone.position.z = -100;

            //tree2 - 8 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = 860;
            tree2Clone.position.y = 30;
            tree2Clone.position.z = 900;

            //tree2 - 9 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = -150;
            tree2Clone.position.z = 800;

            //tree2 - 10 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = -900;
            tree2Clone.position.z = 900;

            //tree2 - 11 > treeGroup
            tree2Clone = tree2.clone();
            treeGroup.add(tree2Clone);

            tree2Clone.position.x = -1000;
            tree2Clone.position.z = -500;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/tree/tree3/scene.glb', function (gltf) {
            // tree3 - 1 > lakeGroup
            const tree3 = gltf.scene;
            lakeGroup.add(tree3);

            tree3.scale.set(10, 10, 10);

            tree3.position.x = 400;
            tree3.position.y = -3;
            tree3.position.z = 490;

            tree3.rotation.z = -0.02;
            tree3.rotation.y = -0.5;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/tree/tree4/scene.glb', function (gltf) {
            //tree4 - 1 > scene
            const tree4 = gltf.scene;
            scene.add(tree4);

            tree4.scale.set(100, 100, 100);

            tree4.position.x = 150;
            tree4.position.y = 5;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/rock/rock1/scene.gltf', function (gltf) {
            //rock - 1 > lakeGroup
            const rock = gltf.scene;
            lakeGroup.add(rock);

            rock.scale.set(100, 100, 100);

            rock.position.x = 390;
            rock.position.y = 1000;
            rock.position.z = 540;

            rock.rotation.y = -0.5;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/rock/rock2/scene.gltf', function (gltf) {
            //rock2 - 1 > scene
            const rock2 = gltf.scene;
            scene.add(rock2);

            rock2.scale.set(100, 100, 100);

            rock2.position.z = -150;
        }, undefined, function (error) {
            console.error(error);
        });

        new THREE.GLTFLoader().load('models/rock/rock3/scene.gltf', function (gltf) {
            //rock3 - 1 > scene
            const rock3 = gltf.scene;
            scene.add(rock3);

            rock3.scale.set(100, 100, 100);

            rock3.position.x = -700;
            rock3.position.z = 600;

            rock3.rotation.y = 3;
        }, undefined, function (error) {
            console.error(error);
        });

        // Camera position
        // camera.position.x = 900;
        // camera.position.y = 600;
        // camera.position.z = 900;
        camera.position.y = 200;
        camera.position.z = 900;

        // DirectionalLight
        const DirectionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
        DirectionalLight.position.set(-100, 100, -100);
        scene.add(DirectionalLight);

        // Mouse move function and listener
        // var mouse = new THREE.Vector2();
        // function onMouseMove(event) {
        //     event.preventDefault();
        //     mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        // };
        // document.addEventListener('mousemove', onMouseMove, false);

        // render function
        const render = function () {
            // var current = tree;
            // current.rotation.y += mouse.y / 150;
            
            requestAnimationFrame(render);
            controls.update();
            renderer.render(scene, camera);
        };

        render();
    </script>
</body>

</html>